# Maintainer: Aster Boese <asterboese@mailbox.org>
pkgname=deviceinfo-converter
pkgver=0.2.0
pkgrel=0
pkgdesc="A quick Rust script to parse postmarketOS deviceinfo files and create a Lomiri deviceinfo file out of it"
url="https://codeberg.org/JustSoup321/deviceinfo-converter"
arch="all"
license="GPL-3.0-or-later"
source="$pkgname-$pkgver.tar.gz::https://codeberg.org/JustSoup321/deviceinfo-converter/archive/$pkgver.tar.gz
	$pkgname.sh"
makedepends="cargo"
builddir="$srcdir/$pkgname"
options="!check" # no tests

build() {
	cargo build --release
}

package() {
	install -Dm 755 ./target/release/deviceinfo-converter -t "$pkgdir/usr/bin"
	install -Dm 644 ../$pkgname.sh "$pkgdir"/etc/profile.d/$pkgname.sh
}

sha512sums="
064a5c76f62851f5e27af5653f2d974ec99fe0e4f40850fc0c831d3246e2111bd1057ffa5b0676074be0097acb18eef9ded1e5c47c1cd7b106c0aa5554e4bb9e  deviceinfo-converter-0.2.0.tar.gz
95e639d402446352bcb7a8c5b2f353e38697d3e81d814f2f40638ce83f7ccc898d22c436f0fd2599827fdfae2134fce572257f739f42eeb4c628441c27fc3467  deviceinfo-converter.sh
"
